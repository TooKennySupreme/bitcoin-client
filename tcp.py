
#!/usr/bin/env python

import hexdump
import socket

my_address="mji6tgw9ZnrRAXN49uy8y2AXc7M5BGfxRx"
priv_key="93UexCJHWp59BXxb2YrixM6NEkMxe7omrGz2mPifQGvQjGtDcuz"
recipient_address="n3GNqMveyvaPvUbH469vDRadqpJMPc84JA"


#script
# OP_DUP OP_HASH160 <public key hash> OP_EQUALVERIFY OP_CHECKSIG
# OP_DUP = 0x76
# OP_HASH160 = 0xa9,
# script.h https://github.com/bitcoin/bitcoin/blob/master/src/script/script.h


TCP_IP = '108.44.249.86'
TCP_PORT = 18333
BUFFER_SIZE = 1024
VERSION_MESSAGE=b"\xf9\xbe\xb4\xd9\x76\x65\x72\x73\x69\x6f\x6e\x00\x00\x00\x00\x00\x64\x00\x00\x00\x35\x8d\x49\x32\x62\xea\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x11\xb2\xd0\x50\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\x00\x00\x00\x00\x00\x00\x3b\x2e\xb3\x5d\x8c\xe6\x17\x65\x0f\x2f\x53\x61\x74\x6f\x73\x68\x69\x3a\x30\x2e\x37\x2e\x32\x2f\xc0\x3e\x03\x00"

ADDR_MESSAGE = b"\xF9\xBE\xB4\xD9\x61\x64\x64\x72\x00\x00\x00\x00\x00\x00\x00\x00\x1F\x00\x00\x00\xED\x52\x39\x9B\x01\xE2\x15\x10\x4D\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xFF\xFF\x0A\x00\x00\x01\x20\x8D"


s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((TCP_IP, TCP_PORT))
s.send(VERSION_MESSAGE)
data = s.recv(BUFFER_SIZE)
print(data)
print("\n")
print(hexdump.dump(data))

print("\n\n")

s.send(ADDR_MESSAGE)
data = s.recv(BUFFER_SIZE)
print(data)
print("\n")
print(hexdump.dump(data))

